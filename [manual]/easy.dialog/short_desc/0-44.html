<!DOCTYPE html>
<html lang="ru">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <meta content="initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
  <!-- TODO: favicon -->
  <link href="../../res/css/easy.library.css" rel="stylesheet"/>
 </head>
 <body>
  <div class="avs-page-wrapper">
   <div class="easy-lib-page">
    <article class="e-block">
     <div class="avs-pages-button__wrapper">
      <a class="avs-pages-button__link" href="../../easy.dialog/manual.html">
       <div class="avs-pages-button">
        Назад
       </div>
      </a>
      <a class="avs-pages-button__link" href="../../easy.dialog/short_desc/0-45.html">
       <div class="avs-pages-button">
        Конструирование диалога ⇨
       </div>
      </a>
     </div>
     <h1 class="avs-article-h1">
      easy.dialog
     </h1>
     <p class="avs-articles-underhead">
      Краткое описание модуля. Страница первая
     </p>
     <a id="short-specification" name="short-specification">
     </a>
     <h2 class="avs-article-h2">
      Краткое описание
     </h2>
     <a id="terms" name="terms">
     </a>
     <h3 class="avs-article-h3">
      Термины и понятия
     </h3>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Тег
      </span>
      — особая метка в тексте, отмечающая вхождение рассматриваемого текста. Теги могут быть открывающие и закрывающие, а так же одиночные. Комплекс из открывающего и закрывающего тегов может называться двойным тегом или сдвоенным тегом.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Содержимое тега
      </span>
      — рассматриваемый текст, место вхождения которого обозначено тегами или тегом. Может использоваться понятие "значение тега". Числовое значение здесь условно обозначается
      <code>
       [#значение]
      </code>
      , а текстовое -
      <code>
       [$значение]
      </code>
      . Вместо слова "значение" может употребляться "число", "текст", "шестнадцатеричное число", и другие слова и словосочетания. Если содержимое тега принимает конечное число значений, это будет показано перечислением этих значений через вертикальную черту в квадратных скобках
      <code>
       [одно значение|второе значение|третье значение]
      </code>
      .
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Команда
      </span>
      — слово или группа слов, которые провоцируют выполнение определённых операций или действий, запуск механизмов.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Конструкция
      </span>
      — текст, записанный по определённым правилам.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Реплика
      </span>
      — текст, заключённый между тегами реплик. Может включать в себя произносимую фразу, другие теги, команды, конструкции.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Герой
      </span>
      — персонаж, которым непосредственно управляет игрок.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Актёр
      </span>
      — персонаж, которым игрок не может управлять непосредственно.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Текст реплики
      </span>
      — фраза героя или актёра, которая будет выведена на экран после обработки реплики. Текст реплики (иногда называется просто "фраза") - единственное содержимое реплики, которое не нужно облекать в специальные конструкции, или помещать между тегами.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Интерпретация реплики
      </span>
      — процесс извлечения всех конструкций и текста реплики из реплики, а так же выполнение конструкций и команд, воспроизведение фразы в виде текста, выводимого на экран. За интерпретацию реплики отвечает процедура
      <code class="em-folder">
       dialog.replic.int
      </code>
      .
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Пустая реплика
      </span>
      — реплика, в которой отсутствует фраза.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Узел
      </span>
      — реплика, в которую вложена другая реплика.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Родительская реплика
      </span>
      — так называется узел по отношению к реплике, которая в него вложена.
      <em>
       Реплика "F" - родительская реплика реплики "A".
      </em>
      Ещё называется родителем. Всякий узел является родителем вложенной в него реплики.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Дочерняя реплика
      </span>
      — так называется реплика по отношению к реплике, в которую она вложена.
      <em>
       Реплика "A" - дочерняя реплика реплики "F".
      </em>
      Всякая реплика, вложенная в узел, является дочерней.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Корень
      </span>
      — текст, помещённый вне тегов реплик. Может называться также корневой репликой, нулевой репликой, начальной репликой или заголовком диалога.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Дефолтное значение
      </span>
      — значение тега, которое было указано в заголовке диалога, либо значение по умолчанию.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Значение по умолчанию
      </span>
      — значение, которое будет возвращено механизмом модуля easy.dialog, если не указано, или ошибочно указано другое значение. Значения по умолчанию встроены в движок.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Уровень
      </span>
      — счёт вложений реплик, степень вложения реплики. Если реплика вложена в корень - первый уровень. Если реплика вложена в реплику, вложенную в корень, - второй уровень. И так далее. Верхним уровнем при этом считается корень.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Ответвления
      </span>
      — одноуровненвые реплики, вложенные в один и тот же узел.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Ветка
      </span>
      — ответвление вместе со всеми вложенными в него репликами.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Финал
      </span>
      — реплика, в которую не вложено ни одной другой реплики. Называется так же финальной репликой, конечной репликой, или последней репликой.
     </p>
     <p class="avs-article-p-termin">
      <span class="avs-article-p-termin-first-word">
       Тело диалога
      </span>
      — текст, содержащий хотя бы одну реплику помимо корня.
     </p>
     <a id="tags-constructions-commands" name="tags-constructions-commands">
     </a>
     <h3 class="avs-article-h3">
      Теги, конструкции, команды
     </h3>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        {:
       </code>
       [$текст]
       <code class="em-string">
        :}
       </code>
      </code>
      — теги, между которыми записываются реплики неиграбельных персонажей (далее: актёры, неписи, NPC, персонажи). Текст реплики выводится на экран автоматически. Теги реплики актёра.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        [:
       </code>
       [$текст]
       <code class="em-string">
        :]
       </code>
      </code>
      — теги, между которыми записываются реплики персонажа, которым управляет игрок (далее - герой). Выводятся на экран в виде доступных игроку действий. При выборе действия, на экран выводится текст реплики. Теги реплики героя.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        npc="
       </code>
       [$настройки]
       <code class="em-string">
        "
       </code>
      </code>
      — конструкция, в которую помещаются настройки вывода фраз актёра.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        hero="
       </code>
       [$настройки]
       <code class="em-string">
        "
       </code>
      </code>
      — конструкция, в которую помещаются настройки форматирования и формирования фраз героя.
     </p>
     <div style="margin-left:0.75cm">
      Настройки формирования и форматирования фраз актёров и героя:
      <p class="avs-article-p">
       <code>
        <code class="em-obj-type">
         name:
        </code>
        [$значение]
        <code class="em-obj-type">
         :name
        </code>
       </code>
       — двойной тег установки имени актёра или героя (в зависимости от того, в какую конструкцию помещено). Если указать пустое значение (между двоеточиями нет ничего), имя не будет выводиться. Если не указывать, будет выводиться имя, указанное в родительской реплике, либо дефолтное имя. Значением может быть любое сочетание пробельных и непробельных символов. Не рекомендуется использовать символ перевода строки.
      </p>
      <p class="avs-article-p">
       <code>
        <code class="em-obj-type">
         ncolor:
        </code>
        [$значение]
       </code>
       — одиночный тег настройки цвета имени актёра или героя (в зависимости от того, в какую конструкцию помещено). Значением может выступать запись из шести шестнадцатеричных цифр. Формат цвета как в html:
       <span style="color: red;">
        RR
       </span>
       <span style="color: darkgreen;">
        GG
       </span>
       <span style="color: blue;">
        BB
       </span>
       . Если не указывать, или оставить значение пустым, будет выводиться значение родительской реплики, или дефолтное.
      </p>
      <p class="avs-article-p">
       <code>
        <code class="em-obj-type">
         fcolor:
        </code>
        [$значение]
       </code>
       — одиночный тег настройки цвета непосредственно фразы актёра или героя (в зависимости от того, в какую конструкцию помещено). Значением может выступать запись из шести шестнадцатеричных цифр. Формат цвета как в html:
       <span style="color: red;">
        RR
       </span>
       <span style="color: darkgreen;">
        GG
       </span>
       <span style="color: blue;">
        BB
       </span>
       . Если не указывать, или оставить значение пустым, будет выводиться значение родительской реплики, или дефолтное.
      </p>
      <p class="avs-article-p">
       <code>
        <code class="em-obj-type">
         nattrib:
        </code>
        [$значение]
       </code>
       — одиночный тег настройки стиля начертания шрифта имени актёра или героя (в зависимости от того, в какую конструкцию помещено). Значением выступают команды аттрибутов, в любом количестве. Если не указывать, или оставить значение пустым, будет выводиться значение родительской реплики, или дефолтное.
      </p>
      <p class="avs-article-p">
       <code>
        <code class="em-obj-type">
         fattrib:
        </code>
        [$значение]
       </code>
       — одиночный тег настройки стиля начертания шрифта фразы актёра или героя (в зависимости от того, в какую конструкцию помещено. Значением выступают команды аттрибутов, в любом количестве. Если не указывать, или оставить значение пустым, будет выводиться значение родительской реплики, или дефолтное.):
      </p>
      <div style="margin-left:0.75cm">
       <p>
        <code>
         <code class="em-operator">
          -b
         </code>
        </code>
        — команда аттрибута, применяющая жирность к тексту.
        <br/>
        <code>
         <code class="em-operator">
          -i
         </code>
        </code>
        — команда аттрибута, применяющая курсив к тексту.
        <br/>
        <code>
         <code class="em-operator">
          -n
         </code>
        </code>
        — команда аттрибута, отменяющая жирность и курсив.
       </p>
       <p class="avs-article-p">
        Аттрибуты считываются в обратном порядке, начиная с последнего, таким образом происходит и применение. Допустим, мы не хотим, чтобы имя героя отображалось курсивом, но продолжало отображаться жирным шрифтом. Пишем "natrib:-b-n". Сначала шрифт вернётся к нормальному виду, потом будет применена жирность. Если указать "natrib:-n-b", то сначала будет применена жирность, а потом шрифт вернётся к нормальному виду.
       </p>
      </div>
      <p class="avs-article-p">
       <code class="em-obj-type">
        tire:
       </code>
       [$значение] — одиночный тег, значение которого определяет символ, выводимый перед фразой (знак мыслеотделительный, знак перед прямой речью). Если не указано, выводится значение родительской реплики, или дефолтное. Если тег и его значение отделяются от остального текста пробелами, можно указывать только непробельные символы. Чтобы использовать пробельные символы в качестве знака перед прямой речью, следует поместить тег и его значение в круглые скобки:
       <br/>
       <code>
        (
        <code class="em-obj-type">
         tire:
        </code>
        [$значение])
       </code>
      </p>
      <p class="avs-article-p">
       Чтобы перед прямой речью не ставилось никаких знаков, следует использовать команду
       <code class="em-operator">
        nope
       </code>
       :
       <br/>
       <code class="em-obj-type">
        tire:
       </code>
       <code class="em-operator">
        nope
       </code>
      </p>
     </div>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        replics="
       </code>
       [$настройки]
       <code class="em-string">
        "
       </code>
      </code>
      — конструкция, в которую помещаются настройки выбора, обработки и вывода реплик.
     </p>
     <div style="margin-left:0.75cm">
      Настройки выбора, обработки и вывода реплик актёров и героя:
      <p class="avs-article-p">
       <code>
        <code class="em-obj-type">
         repeat:
        </code>
        [one|once|cicle]
       </code>
       — одиночный тег, значение которого определяет настройки повтора фраз актёра из ответвлений. Можно использовать три команды:
      </p>
      <div style="margin-left:0.75cm">
       <p>
        <code class="em-operator">
         one
        </code>
        — всё время диалога будет выводиться фраза только одного из ответвлений.
        <br/>
        <code class="em-operator">
         once
        </code>
        — всякий раз будет выводиться фраза из ответвления, фраза которого ещё не выводилась. Когда такие ответвления закончатся, будет выводиться фраза ответвления, фраза из которого выводилась последний раз.
        <br/>
        <code class="em-operator">
         cicle
        </code>
        — всякий раз будет выводиться фраза из следующего ответвления. Когда закончатся ответвления, фразы из которых ещё не выводились, выбор следующего ответвления пойдёт с начала.
       </p>
      </div>
      <p class="avs-article-p">
       <code>
        <code class="em-obj-type">
         repeat:
        </code>
        [random|straight]
       </code>
       — одиночный тег, значение которого определяет настройки выбора следующего ответвления для реплик актёра. Можно использовать две команды:
      </p>
      <div style="margin-left:0.75cm">
       <p>
        <code class="em-operator">
         random
        </code>
        — случайный выбор ответвления.
        <br/>
        <code class="em-operator">
         straight
        </code>
        — выбор следующего ответвления в порядке очереди, в которой они записаны в теле диалога.
       </p>
      </div>
     </div>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        iffing:
       </code>
       [$условия]
       <code class="em-string">
        :iffing
       </code>
      </code>
      — сдвоенный тег, значение которого используется в качестве условия вывода реплики.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        act-name:
       </code>
       [$текст]
       <code class="em-string">
        :act-name
       </code>
      </code>
      — сдвоенный тег, значение которого используется в качестве названия действия при интерпретации реплики героя.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        frase-block:
       </code>
       [$текст]
       <code class="em-string">
        :frase-block
       </code>
      </code>
      — конструкция вывода блока последовательных фраз. Между тегами размещается набор строк, каждая из которых считается отдельной фразой. При этом если в начале фразы выставлен тег
      <code class="em-obj-class">
       &lt;npc-name&gt;
      </code>
      , к ней применяются настройки фразы актёра, если же в начале фразы выставлен тег
      <code>
       <code class="em-obj-class">
        &lt;hero-name&gt;
       </code>
      </code>
      , к ней применяются настройки фразы героя.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        dynamic-code:
       </code>
       [$текст]
       <code class="em-string">
        :dynamic-code
       </code>
      </code>
      — между этими тегами помещается обычный код QSP, который будет выполнен во время интерпретации реплики.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        levelup:
       </code>
       [#число]
      </code>
      — команда в виде одиночного тега, которая "возвращает" интерпретатор на несколько уровней вверх по узлам.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        leveljump:
       </code>
       [$метка]
      </code>
      — команда в виде одиночного тега, которая отправляет интерпретатор к реплике, содержащей указанную метку. Метка указывается в значении тега.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-string">
        marker:
       </code>
       [$метка]
      </code>
      — одиночный тег, значение которого считается меткой реплики.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-operator">
        closeup
       </code>
      </code>
      — команда, наличие которой в интерпретируемой реплике приведёт к закрытию диалога.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-operator">
        selectact.delete
       </code>
      </code>
      — команда, наличие которой в интерпретируемой реплике приведёт к удалению текущего действия из списка без обновления списка.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-comment">
        &lt;!--
       </code>
       [$комментарий]
       <code class="em-comment">
        --&gt;
       </code>
      </code>
      — открывающий и закрывающий теги комментария. В комментарии можно помещать всё, кроме фраз актёров и героя и других комментариев. Комментарии можно размещать в любом месте диалога, но не между тегами
      <code>
       dynamic-code: :dynamic-code
      </code>
      и
      <code>
       iffing: :iffing
      </code>
      . При наличии внутри комментариев описанных выше тегов и комманд, следует отделять их от тегов комментария хотя бы одним пробелом. Текст комментариев не выводится на экран.
      <a id="planning" name="planning">
      </a>
     </p>
     <h4 class="avs-article-h4">
      Планируемые решения
     </h4>
     <font size="-1">
      Нижеследующие команды и конструкции возможно будут введены в версии модуля 2.0. Названия и принцип действия могут отличаться от приведённых ниже.
     </font>
     <p class="avs-article-p">
      <code>
       <code class="em-system">
        bwaiting:
       </code>
       [#миллисекунды]
      </code>
      — настройка задержки вывода на экран фраз из блока фраз. В настоящий момент задержка существует, но не настраивается из-под диалога. Предшествует каждой отдельной фразе в т.ч. и без указания тегов
      <code>
       <code class="em-obj-class">
        &lt;npc-name&gt;
       </code>
      </code>
      и
      <code>
       <code class="em-obj-class">
        &lt;hero-name&gt;
       </code>
      </code>
      .
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-system">
        rwaiting:
       </code>
       [#миллисекунды]
      </code>
      — настройка задержки вывода на экран текста реплики.
     </p>
     <p class="avs-article-p">
      <code class="em-system">
       selectreplic.delete
      </code>
      — команда удаления реплики из диалога. Реплика удаляется из текущего диалога. Если закрыть и вновь открыть диалог, реплика вновь появится в ветке.
     </p>
     <p class="avs-article-p">
      <code class="em-system">
       selectreplic.kill
      </code>
      — команда удаления реплики из диалога. Реплика удаляется из диалога насовсем. То есть если закрыть диалог, а потом вновь открыть, реплика не появится в ветке.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-system">
        act-close="
       </code>
       [$настройки]
       <code class="em-system">
        "
       </code>
      </code>
      — конструкция, в которую помещаются настройки стандартного действия закрытия диалога. Стандартное действие - это действие, которое будет появляться в списке действий постоянно.
     </p>
     <p class="avs-article-p">
      <code>
       <code class="em-system">
        act-up="
       </code>
       [$настройки]
       <code class="em-system">
        "
       </code>
      </code>
      — конструкция, в которую помещаются настройки стандартного действия, возвращающего на несколько узлов вверх. В частности такое действие должно возвращать к последнему узлу, где обновлялся список действий.
     </p>
     <p class="avs-article-p">
      Возможно будет введена конструкция описания стандартных действий/реплик героя, которые должны повторяться на протяжении всей ветки диалога.
      <code>
       <code class="em-system">
        act-standart="
       </code>
       [$настройки]
       <code class="em-system">
        "
       </code>
      </code>
      - вместо настроек перечисляются метки стандартных реплик. Сами реплики располагаются в скрытой ветке.
     </p>
     <div class="avs-pages-button__wrapper">
      <a class="avs-pages-button__link" href="../../easy.dialog/manual.html">
       <div class="avs-pages-button">
        Назад
       </div>
      </a>
      <a class="avs-pages-button__link" href="../../easy.dialog/short_desc/0-45.html">
       <div class="avs-pages-button">
        Конструирование диалога ⇨
       </div>
      </a>
     </div>
    </article>
    <aside class="e-block">
     <div class="avs-page-stamp">
      <p>
       Aleks Versus'Easy Libraries'2013-
       <span class="subscribe-year">
        2023
       </span>
      </p>
      <p>
       Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-
       <span class="subscribe-year">
        2023
       </span>
      </p>
     </div>
    </aside>
   </div>
  </div>
 </body>
</html>