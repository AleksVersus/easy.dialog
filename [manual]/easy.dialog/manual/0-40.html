<!DOCTYPE html>
<html lang="ru">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<meta content="initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
<!-- TODO: favicon -->
<link href="../../res/css/easy.library.css" rel="stylesheet"/></head>
<body>
<div class="avs-page-wrapper">
<div class="easy-lib-page">
<article class="e-block">
<div class="avs-pages-button__wrapper">
<div class="avs-pages-button__left-combine">
<a class="avs-pages-button__link" href="../../easy.dialog/manual.html">
<div class="avs-pages-button">Назад</div>
</a>
<a class="avs-pages-button__link" href="../../easy.dialog/manual/0-39.html">
<div class="avs-pages-button">⇦ Простые диалоги</div>
</a>
</div>
<a class="avs-pages-button__link" href="../../easy.dialog/manual/0-41.html">
<div class="avs-pages-button">Чуть более сложные диалоги ⇨</div>
</a>
</div>
<h1 class="avs-article-h1">easy.dialog</h1>
<p class="avs-articles-underhead">Подробное руководство по использованию модуля, с примерами. Страница вторая</p>
<a id="dialog_sets" name="dialog_sets"></a>
<h2 class="avs-article-h2">Настройки диалога</h2>
<a id="format_replics" name="format_replics"></a>
<h3 class="avs-article-h3">Форматирование реплик</h3>
<p class="avs-article-p">по умолчанию, все реплики персонажей выводятся чёрным цветом, все реплики героя серым цветом с курсивом. по умолчанию, перед репликами не ставятся имена, но ставится знак тире. Всё это можно изменить и настроить непосредственно в самом тексте диалога.</p>
<p class="avs-article-p">Настройки можно вынести за реплики, тогда эти настройки будут считаться настройками по умолчанию. Например:</p>
<pre class="Monokai-Code"><span class="Monokai-String">
        npc="name:Бабуся:name"<br/>
        hero="name:Солдат Котёнкин:name"<br/><br/>
        {:Добрый вечер, милок.<br/>
           [:<br/>
              Здравствуйте, бабуся!<br/>
           :]<br/>
           [:<br/>
              Девушка, мы разве знакомы?<br/>
           :]<br/>
        :}
        </span></pre>
<p class="avs-article-p">Настройки доступны самые разнообразные.</p>
<p class="avs-empty"><code class="em-string">npc=" "</code> - настройки отображения фраз неписи в окне основного описания.</p>
<p class="avs-empty"><code class="em-string">hero=" "</code> - настройки отображения фраз героя в окне основного описания.</p>
<p class="avs-article-p">
          Настройки, вкладываемые в <code class="em-string">npc=" "</code> и <code class="em-string">hero=" "</code>:
        </p>
<section style="margin-left:2vw;">
<p><code class="em-obj-type">name: :name</code> - имя. Если между двоеточиями нет символов, не отображается.</p>
<p><code class="em-obj-type">ncolor:</code> - цвет выводимого имени в шестнадцатеричном формате. Если не указан, или указан ошибочно, выводится чёрным (для неписей) или серым (для героя).</p>
<p><code class="em-obj-type">nattrib:</code> - аттрибуты выводимого имени, указываются подряд без пробелов:</p>
<section style="margin-left:2vw;">
<p><code class="em-operator">-b</code> - жирный</p>
<p><code class="em-operator">-i</code> - курсив</p>
<p><code class="em-operator">-n</code> - нормальный. Сбрасывает значение прочих атрибутов.</p>
</section>
<p>по умолчанию, для героя и для неписи выставлен жирный атрибут, для героя - курсив. Аттрибуты считываются в обратном порядке, начиная с последнего, таким образом происходит и применение. Допустим, мы не хотим, чтобы имя героя отображалось курсивом, но продолжало отображаться жирным шрифтом. Пишем "<code class="em-string">nattrib:-b-n</code>". Сначала шрифт вернётся к нормальному виду, потом будет применена жирность. Если указать "<code class="em-string">nattrib:-n-b</code>", то сначала будет применена жирность, а потом шрифт вернётся к нормальному виду.</p>
<p><code class="em-obj-type">fcolor:</code> - цвет выводимой фразы в шестнадцатеричном формате. Если не указан, или указан ошибочно, выводится чёрным (для неписей) или серым (для героя).</p>
<p><code class="em-obj-type">fattrib:</code> - аттрибуты выводимой фразы (см. список выше). Если не указаны, для фраз героя применяется курсив.</p>
<p><code class="em-obj-type">tire:</code> - вид тире. Можно указать любые непробельные символы, и они будут выводиться перед каждой фразой героя или неписи. Чтобы ничего не выводилось, указывается слово "nope". Чтобы выводились символы пробела, используйте <tt>&amp;nbsp;</tt> или поместите тег в круглые скобки "<code class="em-string">(tire: )</code>".</p>
</section>
<a id="replic_sets" name="replic_sets"></a>
<p class="avs-article-p"><code class="em-string">replics=" "</code> - настройки <a href="../../easy.dialog/manual/0-40.html#replic_sets_a" title="подробнее...">порядка вывода реплик</a>:</p>
<section style="margin-left:2vw;">
<p><code class="em-obj-type">repeat:</code> - количество повторов вывода реплик неписи:</p>
<section style="margin-left:2vw;">
<p><code class="em-operator">one</code> - выводится одна реплика. Например, выбранная случайно.</p>
<p><code class="em-operator">once</code> - реплики неписи, кроме одиночных, выводятся единожды. Если реплики исчерпаны, выводится последняя.</p>
<p><code class="em-operator">cicle</code> - реплики выводятся по кругу, т.е. имеют свойство повторяться. по умолчанию.</p>
</section>
<p><code class="em-obj-type">shuffle:</code> - порядок вывода реплик.</p>
<section style="margin-left:2vw;">
<p><code class="em-operator">random</code> - случайный порядок</p>
<p><code class="em-operator">straight</code> - прямой порядок т.е. от первой к последней. по умолчанию.</p>
</section>
</section>
<p>Счёт порядка вывода реплик и количества повторов ведётся только в течении диалога. Как только диалог будет закрыт, счёт обнуляется. Для сохранения счёта реплик, нужно использовать другие способы.</p>
<p class="avs-article-p">В записи настроек так же не играет роль количество пробельных символов и переводов строк. Единственное что, между настройками должен находиться хотя бы один пробел, символ табуляции, или символ перевода строки. Примеры настроек:</p>
<pre class="Monokai-Code"><span class="Monokai-String">
        npc="<br/>
           name:Бабуся:name<br/>
           ncolor:ff8800<br/>
           fcolor:886600<br/>
           fattrib:-i<br/>
           tire:nope<br/>
        "<br/>
        hero="name:Солдат Котёнкин:name ncolor:000000 fcolor:880088 nattrib:-b-n"<br/>
        replics="repeat:one<br/>
        shuffle:random"
        </span></pre>
<p class="avs-article-p">Непосредственно в тексте реплик можно использовать любые html-теги, поддерживаемые плеером, и таким образом дополнительно форматировать текст. Например, вы можете выделить одно слово в реплике другим цветом:</p>
<pre class="Monokai-Code"><span class="Monokai-String">
        {:Добрый вечер, милок.<br/>
           [:<br/>
              Здравствуйте, бабуся!<br/>
           :]<br/>
           [:<br/>
              Девушка, мы разве &lt;font color=#008800&gt;знакомы&lt;/font&gt;?<br/>
           :]<br/>
        :}
        </span></pre>
<p class="avs-article-p">Перед выводом на экран любая реплика облекается в точно такие же html-теги в соответствии с настройками. Например, Вы настроили цвет для фразы:</p>
<pre class="Monokai-Code"><span class="Monokai-String">
        npc="<br/>
           name:Бабуся:name<br/>
           fcolor:886600<br/>
        "<br/>
        {:Добрый вечер, милок.<br/>
           [:<br/>
              Здравствуйте, бабуся!<br/>
           :]<br/>
           [:<br/>
              Девушка, мы разве &lt;font color=#008800&gt;знакомы&lt;/font&gt;?<br/>
           :]<br/>
        :}
        </span></pre>
<p class="avs-article-p">Перед выводом на экран, будет сформирована строка:</p>
<pre class="Monokai-Code">
          <span class="Monokai-String">&lt;font color=#000000&gt;&lt;b&gt;Бабуся:&lt;/b&gt;&lt;/font&gt;&lt;font color=#886600&gt; — Добрый вечер, милок.&lt;/font&gt;</span>
        </pre>
<p class="avs-article-p">На экране это будет выглядеть так:</p>
<div class="em-on-screen">
<font color="#000000"><b>Бабуся:</b></font>
<font color="#886600"> — Добрый вечер, милок.</font>
</div>
<p class="avs-article-p">Модуль автоматически включает распознавание html-тегов в плеере, при обращении к локации "<code class="em-folder">dialog.int</code>".</p>
<p class="avs-article-p">Когда игрок выберет действие "Девушка, мы разве <font color="#008800">знакомы</font>?", перед выводом на экран будет сформирована надпись:</p>
<pre class="Monokai-Code">
        <span class="Monokai-String">&lt;font color=#888888&gt;&lt;i&gt; — Девушка, мы разве &lt;font color=#008800&gt;знакомы&lt;/font&gt;?&lt;/i&gt;&lt;/font&gt;</span>
        </pre>
<p class="avs-article-p">
          На экране это будет выглядеть так:</p>
<div class="em-on-screen">
<font color="#888888"><i> — Девушка, мы разве <font color="#008800">знакомы</font>?</i></font>
</div>
<p class="avs-article-p">То есть будет сохранено автоматическое форматирование и форматирование, которое вы пропишете прямо внутри фразы. Это очень удобно, если нужно форматировать только одну реплику, предложение в реплике, или слово. Html-теги можно использовать и при указании имени, тогда имя будет отличаться от основного цвета.</p>
<a id="replics_until" name="replics_until"></a>
<h3 class="avs-article-h3">Наследование настроек</h3>
<p class="avs-article-p">Указывать настройки можно не только для всего диалога вцелом, но и для отдельных реплик и даже для целых веток. Возьмём наш старый пример и немного его модифицируем:</p>
<pre class="Monokai-Code"><span class="Monokai-String">
        npc="<br/>
        name:Ведущий:name<br/>
        ncolor:008888<br/>
        fcolor:008888<br/>
        "<br/>
        hero="<br/>
        name:Вася Пупкин:name<br/>
        "<br/>
        <br/>
        {:<br/>
           Как вас зовут?<br/>
           [:<br/>
        <br/>
           hero="ncolor:008800"<br/>
              Меня зовут Вася.<br/>
              {:Вас зовут Вася?<br/>
                 [:<br/>
                 npc="fcolor:880000"<br/>
                 Да, меня зовут Вася.<br/>
                    {:да ну нафиг:}<br/>
                    [:<br/>
                    нет. чистая правда<br/>
                    :]<br/>
                 :]<br/>
                 [:Нет, никто меня так не зовёт:]<br/>
              :}<br/>
              {:<br/>
                 Это правда, что вас зовут Васей?<br/>
                 [:Правда<br/>
                 :]<br/>
                 [:Неправда:]<br/>
              :}<br/>
           :]<br/>
           [:<br/>
           hero="ncolor:ff0000"<br/>
              Меня зовут Петя.<br/>
              {:<br/>
                 Вас зовут Петя?<br/>
                 [:Да{:Как это удобно!:}:]<br/>
                 [:<br/>
                    Нет<br/>
                    {:Вас зовут не Петя? Как неудобно!:}<br/>
                 :]<br/>
              :}<br/>
              {:<br/>
                 Это правда, что вас зовут Петей?<br/>
                 [:Правда:]<br/>
                 [:Неправда:]<br/>
              :}<br/>
              {:Неужели в самом деле Петей Вас зовут?<br/>
                 [:В самом деле:]<br/>
                 [:Нет, не в самом:]<br/>
              :}<br/>
           :]<br/>
        :}</span></pre>
<p class="avs-article-p">До начала диалога мы прописали настройки, которые будут считаться настройками по умолчанию. Первым делом на экран будет выведена фраза "Как вас зовут?" с настройками для npc, которые указаны для всего диалога. Для всего диалога указано так же и имя героя, но не указан ни цвет, ни аттрибуты жирности/наклона, поэтому будут применяться настройки по умолчанию. То есть цвет имени героя будет серым. Однако, как только игрок выберет одно из выпавших действий:</p>
<div class="em-act-button">Меня зовут Вася</div>
<p class="avs-article-p">или</p>
<div class="em-act-button">Меня зовут Петя</div>
<p class="avs-article-p">будут применены настройки, вложенные в это действие. Эти настройки подменят собой настройки, указанные для всего диалога, но лишь те из них, которые указаны явно. Так, если игрок выберет действие "Меня зовут Вася", имя героя для текущей и всех вложенных реплик будет зелёным. Все остальные настройки останутся прежними. Смотрим дальше. После выбора действия "Меня зовут Вася", актёр "переспросит": "Вас зовут Вася?", фраза эта появится на экране всё с теми же общими настройками для всего диалога. Однако вслед за ней на экране появятся два действия:</p>
<div class="em-act-button">Да, меня зовут Вася.</div>
<p class="avs-article-p"> и </p>
<div class="em-act-button">Нет, никто меня так не зовёт</div>
<p class="avs-article-p">При выборе первого, настройка цвета для вывода фраз неписи изменится, и следующая фраза "да ну нафиг" появится на экране, раскрашенная красным цветом. Таким образом, как уже было сказано, для ветки реплик, или реплики, изменяется только та настройка, которая была явно указана. Не указанные настройки достаются в наследство от старшей реплики (т.е. той, в которую мы вложили текущую).</p>
<a id="reset_sets" name="reset_sets"></a>
<h3 class="avs-article-h3">Сброс настроек</h3>
<p class="avs-article-p">Для сброса настроек в значение, предопределённое для всего диалога (значения по умолчанию), используется ключевое слово default.</p>
<ul class="avs-articles-structure">
<li><code class="em-string">npc="default"</code>   - сбрасывает все настройки реплик неписи в значения по умолчанию (дефолтные значения),</li>
<li><code class="em-string">hero="default"</code>   - сбрасывает все настройки реплик героя в дефолтные значения,</li>
<li><code class="em-string">replics="default"</code> - сбрасывает все настройки порядка вывода реплик в дефолтные значения.</li>
</ul>
<p class="avs-article-p">Можно сбрасывать так же и отдельную настройку, указав слово default после двоеточия. Например, сбросить цвет фраз:</p>
<p class="avs-article-p"><code class="em-string">fcolor:</code><code class="em-operator">default</code></p>
<a id="replic_sets_a" name="replic_sets_a"></a>
<h3 class="avs-article-h3">Порядок вывода реплик</h3>
<p class="avs-article-p"><a href="../../easy.dialog/manual/0-40.html#replic_sets">Выше</a> уже были обозначены основные настройки порядка вывода реплик. Рассмотрим подробнее их поведение на примере последнего диалога, а точнее вот этой его части:</p>
<pre class="Monokai-Code"><span class="Monokai-String">
        [:<br/>
            hero="ncolor:ff0000"<br/>
            Меня зовут Петя.<br/>
            <span style="color:#d34444;">{:<br/>
               Вас зовут Петя?<br/>
               [:Да{:Как это удобно!:}:]<br/>
               [:<br/>
                  Нет<br/>
                  {:Вас зовут не Петя? Как неудобно!:}<br/>
               :]<br/>
            :}</span><br/>
            <span style="color:#9144d3;">{:<br/>
               Это правда, что вас зовут Петей?<br/>
               [:Правда:]<br/>
               [:Неправда:]<br/>
            :}</span><br/>
            <span style="color:#4470d3;">{:Неужели в самом деле Петей Вас зовут?<br/>
               [:В самом деле:]<br/>
               [:Нет, не в самом:]<br/>
            :}</span><br/>
        :]</span>
        </pre>
<p class="avs-article-p">Для наглядности разные реплики выделены разными цветами.</p>
<p class="avs-article-p">Предположим игрок выбрал действие "Меня зовут Петя". Какая из трёх реплик неписи должна быть выведена? Вот за это и отвечают настройки порядка вывода реплик.</p>
<ul class="avs-articles-structure">
<li>
<p class="avs-article-p"><code class="em-string">shuffle:</code> — настройка, определяющая выбор следующей реплики. Можно указать один из вариантов:</p>
<ul class="avs-articles-structure">
<li><code class="em-operator">random</code>   - реплика неписи будет выбрана случайным образом.</li>
<li><code class="em-operator">straight</code>   - будет выбрана следующая реплика в порядке очереди. Т.е. если это первый выбор действия "Меня зовут Петя", будет выведена первая реплика (отмечена красным цветом), если игрок второй раз нажмёт на действие, будет выведена вторая реплика (отмечена фиолетовым цветом), и т.д.</li>
</ul>
</li>
<li>
<p class="avs-article-p"><code class="em-string">repeat:</code>   - настройка, определяющая режим повтора реплик. Можно указать один из вариантов:</p>
<ul class="avs-articles-structure">
<li><code class="em-operator">one</code>   - всякий раз при выборе этого действия будет выводиться одна и та же реплика. Например, была выставлена настройка <code class="em-string">shuffle:random</code>. Когда игрок выберет действие "Меня зовут Петя", случайным образом будет выбрана одна из реплик, и показана на экране. В следующий раз, когда игрок вновь выберет это же действие, вновь на экран будет выведена та же самая реплика.</li><br/>
<li><code class="em-operator">once</code>   - реплики будут выводиться не повторяясь по одному разу. После вывода последней реплики всё время будет выводиться только она. Например, была выставлена настройка <code class="em-string">shuffle:straight</code>. Когда игрок выберет действие "Меня зовут Петя" первый раз, на экран будет выведена первая реплика (выделена красным цветом. Во второй раз появится вторая реплика (выделена фиолетовым), в третий раз - третья (синяя. Последняя реплика). В четвёртый, пятый и далее будет выводиться третья реплика.</li><br/>
<li><code class="em-operator">cicle</code>   - реплики будут выводиться непрерывно по кругу. Если выставлена настройка <code class="em-string">shuffle:straight</code>, первый раз выведется первая реплика, второй раз - вторая, третий - третья, на четвёртый раз - вновь первая, потом снова: вторая, третья, первая, вторая... и т.д. Для настройки <code class="em-string">shuffle:random</code> выбор реплики несколько сложнее. Первый раз, когда игрок выберет действия, реплика определится случайным образом из трёх. На второй раз случайным образом выбирается одна из двух оставшихся реплик. Потом последняя оставшаяся. В четвёртый раз вновь происходит выбор случайным образом из трёх реплик, и т.д.</li>
</ul>
</li>
</ul>
<div class="avs-pages-button__wrapper">
<div class="avs-pages-button__left-combine">
<a class="avs-pages-button__link" href="../../easy.dialog/manual.html">
<div class="avs-pages-button">Назад</div>
</a>
<a class="avs-pages-button__link" href="../../easy.dialog/manual/0-39.html">
<div class="avs-pages-button">⇦ Простые диалоги</div>
</a>
</div>
<a class="avs-pages-button__link" href="../../easy.dialog/manual/0-41.html">
<div class="avs-pages-button">Чуть более сложные диалоги ⇨</div>
</a>
</div>
</article>
<aside class="e-block">
<div class="avs-page-stamp">
<p class="avs-empty">Aleks Versus'Easy Libraries'2013-<span class="subscribe-year">2023</span></p>
<p class="avs-empty">Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span class="subscribe-year">2023</span></p>
</div>
</aside>
</div>
</div></body>
</html>