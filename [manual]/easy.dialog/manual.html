<!DOCTYPE html>
<html lang="ru">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<meta content="initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"/>
<!-- TODO: favicon -->
<link href="../res/css/easy.library.css" rel="stylesheet"/></head>
<body>
<div class="avs-page-wrapper">
<div class="easy-lib-page">
<article class="e-block">
<h1 class="avs-article-h1">easy.dialog</h1>
<div class="avs-article-epigraph">
<p class="avs-article-p">Модуль разрабатывался для плеера QSP v 5.7.0, тестировался только на нём. Не гарантируется правильная работа на плеерах иных версий. Ошибки и недочёты в модуле устраняются по мере нахождения, поэтому гарантировать безупречную работу даже на "классике" не могу. Тестовая загрузка диалога из ста реплик заняла чуть больше 1000 мс. В режиме [NO PRE-SETS] - около 800 мс. Скорость загрузки диалога зависит от объёма диалога и от глубины вложенности реплик.</p>
<p class="avs-article-p">По всем вопросам и предложениям обращаться:</p>
<ul style="font-family:monospace;">
<li>ICQ: 437337904</li>
<li>Skype: aleksversus</li>
<li>e-mails:<ul>
<li>aleksversus@mail.ru</li>
<li>lex666endless@rambler.ru</li>
<li>aleks.versus@yandex.ru</li>
<li>aleksversus@yandex.ru</li>
</ul>
</li>
<li>Вконтакте: id40090736</li>
</ul>
<p class="avs-article-p"> Изначально модуль создавался для обеспечения нужд игры "Волшебство и сталь".</p>
</div>
<p class="avs-article-p">Модуль easy.dialog.qsp предназначен для интерпретации диалогов. Диалоги пишутся в виде текстовых констант или переменных и передаются интерпретатору. Всю обработку диалога, отслеживание переменных и пр., модуль берёт на себя. Если использовать модуль для обработки диалогов, можно писать диалоги достаточно быстро и просто.</p>
<h2 class="avs-article-h2">Подключение и использование</h2>
<p class="avs-article-p">Предполагается, что вы уже пробовали писать игры на QSP, знаете основные команды и, возможно, знаете, что такое функции, переменные и массивы и как формируется html-форматирование. Впрочем, можно обойтись и без последнего.</p>
<p class="avs-article-p">Модуль поставляется в комплекте с библиотекой <strong>easy.math.qsp</strong> и без неё работать не будет.</p>
<p class="avs-article-p">Чтобы подключить модуль к своей игре, нужно:</p>
<ol>
<li><a class="avs-page-external-link" href="http://aleksversus.narod.ru/qsp/projects/easy.dialog.rar" title="прямая ссылка на архив RAR">Скачать архив</a> и извлечь его содержимое в папку с вашей игрой. В папке с вашей игрой должна появиться папка "lib".<ul>
<li>После знакомства с примерами файл "<code class="em-folder">game.easy.dialog.qsp</code>" можно удалить.</li>
</ul>
</li>
<li>Проверить в папке "lib" наличие файлов "<code class="em-folder">easy.dialog.qsp</code>" и "<code class="em-folder">easy.math.qsp</code>".</li>
<li>Открыть файл своей игры (например с помощью QGen) и на самой первой локации ввести две строки:
            <pre class="Monokai-Code">
            <span class="Monokai-Operator">addqst</span> <span class="Monokai-String">'lib/easy.dialog.qsp'</span><br/>
            <span class="Monokai-Operator">addqst</span> <span class="Monokai-String">'lib/easy.math.qsp'</span>
            </pre>
</li>
<li>Сохранить свою игру.</li>
</ol>
<p class="avs-article-p">Теперь при запуске вашей игры, модуль "easy.dialog" и библиотека "easy.math" будут подключаться к игре автоматически.</p>
<p class="avs-article-p-warning"><strong>Внимание!!!</strong> При подключении библиотек к своей игре будьте внимательны. К игре добавляются только те локации, названия которых отсутствуют в вашей игре. Просмотрите список локаций в подключаемых библиотеках, чтобы предупредить совпадения имён.</p>
<p class="avs-article-p">Диалоги для модуля пишутся в виде текстовых констант, или значений текстовых переменных. После чего константа или значение переменной передаются в качестве нулевого аргумента локации <code class="em-string">dialog.int</code>. Вызывать локацию следует через команду <tt>
<code class="em-operator">gosub</code>
</tt>:</p>
<pre class="Monokai-Code">
           <span class="Monokai-Operator">gosub</span> <span class="Monokai-String">'dialog.int'</span>, <span class="Monokai-Obj-Type">$переменная_диалог</span><br/>
           <span class="Monokai-Operator">gosub</span> <span class="Monokai-String">'dialog.int'</span>, <span class="Monokai-String">'<br/>
              {:Короткий диалог<br/>
                 [:Короткое действие:]<br/>
              :}'</span>
        </pre>
<p class="avs-article-p">При вызове <code class="em-folder">dialog.int</code> будет очищено основное описание, список действий и дополнительное описание. После того как диалог будет закрыт, и описания и список действий восстановятся.</p>
<p class="avs-article-p">При интерпретации реплики игнорируется преформатирование (символы пробелов и табуляций перед строками; строки не содержащие непробельных символов до первой строки, содержащей непробельные символы, и после последней строки, содержащей непробельные символы).</p>
<h2 class="avs-article-h2">История версий:</h2>
<ul>
<li>Версия: 1.0.1
            <ol>
<li>Первая стабильная версия.</li>
</ol>
</li>
</ul>
<h2 class="avs-article-h2">Документация:</h2>
<ul color="884400" type="circle">
<li><b>Подробное руководство по использованию модуля с примерами</b>
<ol type="I">
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-39.html#podklu4enie">Подключение</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-39.html#easydialog">Простые диалоги</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-39.html#zapusk_dialoga">Запуск диалога</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-40.html#dialog_sets">Настройки диалога</a>
<ol type="1">
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-40.html#format_replics">Форматирование реплик</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-40.html#replics_until">Наследование настроек</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-40.html#resets_sets">Сброс настроек</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-40.html#replic_sets_a">Порядок вывода реплик</a></li>
</ol>
</li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-41.html#hardly_easy_dialog">Чуть более сложные диалоги</a>
<ol type="1">
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-41.html#root_stick">Корни, ветви и узлы</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-41.html#head-hide-replics">Скрытый узел</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-41.html#remarks">Ремарки</a>
<ul>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-41.html#remark_inside">Ремарки внутри реплики</a></li>
</ul>
</li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-42.html#head-kak_izbezhat_o4istki_spiska_deystviy">Как избежать очистки списка действий</a>
<ul>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-42.html#delete-acts-from-list">Удаление действия из списка</a></li>
</ul>
</li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-42.html#replics-block">Блок последовательных реплик</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-42.html#if-replics">Реплики по условию</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-42.html#replics-code">Выполнение кода при выводе реплики</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-42.html#prinuditelny_perehod">Принудительные переходы по репликам. Закрытие диалога</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-43.html#act-name">Названия действий</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-43.html#comments">Комментирование реплик</a></li>
</ol>
</li>
<li><a class="avs-page-external-link" href="../easy.dialog/manual/0-43.html#ending">Заключение</a></li>
</ol>
</li>
<li><b>Краткое описание</b>
<ol type="I">
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-44.html#terms">Термины и понятия</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-44.html#tags-constructions-commands">Теги, конструкции, комманды</a>
<ol type="1">
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-44.html#planning">Планируемые решения</a></li>
</ol>
</li>
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-45.html#dialog-construct">Конструирование диалога</a>
<ol type="1">
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-45.html#replics-construct">Конструирование реплик</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-45.html#comments">Комментирование</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-45.html#settings">Конструирование настроек</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-45.html#tags-u">Теги и их значения</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-45.html#dialog-const">Составление диалогов</a></li>
</ol>
</li>
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-45.html#zna4enia-po-umol4aniu">Значения по умолчанию</a></li>
<li><a class="avs-page-external-link" href="../easy.dialog/short_desc/0-45.html#podkl-i-i">Подключение и использование</a></li>
</ol>
</li>
</ul>
</article>
<aside class="e-block">
<div class="avs-page-stamp">
<p>Aleks Versus'Easy Libraries'2013-<span class="subscribe-year">2023</span></p>
<p>Aleks Versus'Game Adventure Making'Really Unimaginable Stories'2013-<span class="subscribe-year">2023</span></p>
</div>
</aside>
</div>
</div></body>
</html>